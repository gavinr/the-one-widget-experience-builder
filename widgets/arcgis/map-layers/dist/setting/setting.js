define(["jimu-core","jimu-ui","jimu-arcgis","jimu-for-builder","jimu-ui/setting-components","jimu-ui/data-source-selector"],(function(t,e,o,n,s,a){return function(t){var e={};function o(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,o),s.l=!0,s.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=289)}({11:function(t,e){t.exports=a},289:function(t,e,o){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var a=o(3),i=o(4),r=o(7),p=o(11),c=o(5),u=o(6),l=o(290),d=o(291),h=o(292),f=function(t){function e(e){var o=t.call(this,e)||this;return o.supportedDsTypes=a.Immutable([c.DataSourceTypes.WebMap,c.DataSourceTypes.WebScene]),o.getPortUrl=function(){return a.getAppStore().getState().portalUrl},o.onRadioChange=function(t){o.props.onSettingChange({id:o.props.id,config:o.props.config.set("useMapWidget",t)}),o.setState({useMapWidget:t})},o.onToolsChanged=function(t,e){o.props.onSettingChange({id:o.props.id,config:o.props.config.set(e,t)})},o.onOptionsChanged=function(t,e){o.props.onSettingChange({id:o.props.id,config:o.props.config.set(e,t)})},o.onToggleUseDataEnabled=function(t){o.props.onSettingChange({id:o.props.id,useDataSourcesEnabled:t})},o.onDataSourceSelected=function(t,e){if(t){var n=t.map((function(t){return{dataSourceId:t.dataSourceJson&&t.dataSourceJson.id,rootDataSourceId:t.rootDataSourceId}}));o.props.onSettingChange({id:o.props.id,useDataSources:n})}},o.onDataSourceRemoved=function(){o.props.onSettingChange({id:o.props.id,useDataSources:[]})},o.onMapWidgetSelected=function(t){o.props.onSettingChange({id:o.props.id,useMapWidgetIds:t})},o.state={useMapWidget:o.props.config.useMapWidget||!1},o}return s(e,t),e.prototype.render=function(){var t=this,e=this.getPortUrl(),o=[];if(this.props.useDataSources)for(var n=0;n<this.props.useDataSources.length;n++)o.push(this.props.useDataSources[n].dataSourceId);var s,c,u=null,f=null,g=null;return s=a.jsx("div",{className:"data-selector-section"},a.jsx(r.SettingRow,null,a.jsx(p.DataSourceSelector,{types:this.supportedDsTypes,selectedDataSourceIds:a.Immutable(o),useDataSourcesEnabled:!0,mustUseDataSource:!0,onSelect:this.onDataSourceSelected,onRemove:this.onDataSourceRemoved})),e&&this.props.dsJsons&&this.props.useDataSources&&1===this.props.useDataSources.length&&a.jsx(r.SettingRow,null,a.jsx("div",{className:"w-100"},a.jsx("div",{className:"webmap-thumbnail",title:this.props.dsJsons[this.props.useDataSources[0].dataSourceId].label},a.jsx(d.default,{mapItemId:this.props.dsJsons[this.props.useDataSources[0].dataSourceId]?this.props.dsJsons[this.props.useDataSources[0].dataSourceId].itemId:null,portUrl:this.props.dsJsons[this.props.useDataSources[0].dataSourceId]?this.props.dsJsons[this.props.useDataSources[0].dataSourceId].portalUrl:null}))))),c=a.jsx("div",{className:"map-selector-section"},a.jsx(r.SettingRow,null,a.jsx(r.JimuMapViewSelector,{onSelect:this.onMapWidgetSelected,useMapWidgetIds:this.props.useMapWidgetIds}))),this.state.useMapWidget?(u=c,f=a.jsx(a.React.Fragment,null,a.jsx(r.SettingRow,{label:a.jsx(a.FormattedMessage,{id:"goto",defaultMessage:l.default.goto})},a.jsx(i.Switch,{className:"can-x-switch",checked:this.props.config&&this.props.config.goto||!1,"data-key":"goto",onChange:function(e){t.onToolsChanged(e.target.checked,"goto")}})),a.jsx(r.SettingRow,{label:a.jsx(a.FormattedMessage,{id:"transparency",defaultMessage:l.default.transparency})},a.jsx(i.Switch,{className:"can-x-switch",checked:this.props.config&&this.props.config.opacity||!1,"data-key":"opacity",onChange:function(e){t.onToolsChanged(e.target.checked,"opacity")}}))),g=a.jsx(r.SettingRow,{label:a.jsx(a.FormattedMessage,{id:"setVisibility",defaultMessage:l.default.setVisibility})},a.jsx(i.Switch,{className:"can-x-switch",checked:this.props.config&&this.props.config.setVisibility||!1,"data-key":"setVisibility",onChange:function(e){t.onOptionsChanged(e.target.checked,"setVisibility")}}))):u=s,a.jsx("div",{css:h.getStyle(this.props.theme)},a.jsx("div",{className:"widget-setting-layerlist"},a.jsx(r.SettingSection,{title:this.props.intl.formatMessage({id:"sourceLabel",defaultMessage:l.default.sourceLabel})},a.jsx(r.SettingRow,null,a.jsx("div",{className:"layerlist-tools w-100"},a.jsx("div",{className:"w-100"},a.jsx("div",{className:"layerlist-tools-item radio"},a.jsx(i.Radio,{id:"map-data",style:{cursor:"pointer"},name:"map-data",onChange:function(e){return t.onRadioChange(!1)},checked:!this.state.useMapWidget}),a.jsx(i.Label,{style:{cursor:"pointer"},for:"map-data",className:"ml-1"},this.props.intl.formatMessage({id:"showLayerForMap",defaultMessage:l.default.showLayerForMap})))),a.jsx("div",{className:"w-100"},a.jsx("div",{className:"layerlist-tools-item radio"},a.jsx(i.Radio,{id:"map-view",style:{cursor:"pointer"},name:"map-view",onChange:function(e){return t.onRadioChange(!0)},checked:this.state.useMapWidget}),a.jsx(i.Label,{style:{cursor:"pointer"},for:"map-view",className:"ml-1"},this.props.intl.formatMessage({id:"interactWithMap",defaultMessage:l.default.interactWithMap})))))),u),a.jsx(r.SettingSection,{title:this.props.intl.formatMessage({id:"options",defaultMessage:l.default.options})},f,a.jsx(r.SettingRow,{label:a.jsx(a.FormattedMessage,{id:"information",defaultMessage:l.default.information})},a.jsx(i.Switch,{className:"can-x-switch",checked:this.props.config&&this.props.config.information||!1,"data-key":"information",onChange:function(e){t.onToolsChanged(e.target.checked,"information")}})),g)))},e.mapExtraStateProps=function(t){return{dsJsons:t.appStateInBuilder.appConfig.dataSources}},e}(u.BaseWidgetSetting);e.default=f},290:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={sourceLabel:"Source",sourceDescript:"A web map or web scene, or any combination of the two.",actions:"Actions",goto:"Zoom to",transparency:"Adjust layer transparency",information:"View layer details",options:"Options",setVisibility:"Toggle layer visibility",showLayerForMap:"Show layers for map data only",interactWithMap:"Interact with a Map widget"}},291:function(t,e,o){"use strict";var n,s=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var a=o(3),i=o(4),r=function(t){function e(e){var o=t.call(this,e)||this;return o.unmount=!1,o.setMapThumbUrl=function(t){if(t||o.setState({mapThumbUrl:null}),o.props.portUrl&&o.props.portUrl!==a.getAppStore().getState().portalUrl)a.esri.restPortal.searchItems({q:"id:"+t,portal:o.props.portUrl+"/sharing/rest"}).then((function(t){if(!o.unmount)if(t.results[0]){var e=o.props.portUrl+"/sharing/rest/content/items/"+t.results[0].id+"/info/"+t.results[0].thumbnail;o.setState({mapThumbUrl:e})}else o.setState({mapThumbUrl:null})}));else{var e=a.getAppStore().getState().portalUrl,n=a.SessionManager.getInstance().getSessionByUrl(e);a.esri.restPortal.searchItems({q:"id:"+t,authentication:a.SessionManager.getInstance().getSessionByUrl(e),portal:e+"/sharing/rest"}).then((function(t){var s;if(!o.unmount)if(t.results[0]){var a=e+"/sharing/rest/content/items/"+t.results[0].id+"/info/"+t.results[0].thumbnail+"?token="+(null===(s=n)||void 0===s?void 0:s.token);o.setState({mapThumbUrl:a})}else o.setState({mapThumbUrl:null})}))}},o.state={mapThumbUrl:null},o}return s(e,t),e.prototype.componentDidMount=function(){this.unmount=!1,this.setMapThumbUrl(this.props.mapItemId)},e.prototype.componentDidUpdate=function(t,e){t.mapItemId!==this.props.mapItemId&&this.setMapThumbUrl(this.props.mapItemId)},e.prototype.componentWillUnmount=function(){this.unmount=!0},e.prototype.render=function(){return this.state.mapThumbUrl?a.React.createElement(i.ImageWithParam,{imageParam:{url:this.state.mapThumbUrl}}):a.React.createElement(i.ImageWithParam,{imageParam:{}})},e}(a.React.PureComponent);e.default=r},292:function(t,e,o){"use strict";var n=this&&this.__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t};Object.defineProperty(e,"__esModule",{value:!0});var s,a=o(3);e.getStyle=function(t){return a.css(s||(s=n(["\n    .widget-setting-layerlist{\n      font-weight: lighter;\n      font-size: 13px;\n\n      .source-descript {\n        color: ",";\t\n      }\n\n      .webmap-thumbnail{\n        cursor: auto;\n        width: 100%;\n        height: 120px;\n        overflow: hidden;\n        padding: 1px;\n        border: "," solid initial;\n        img, div{\n          width: 100%;\n          height: 100%;\n        }\n      }\n\n      .layerlist-tools{\n        .layerlist-tools-item{\n          display: flex;\n          /* justify-content: space-between; */\n          margin-bottom: 8px;\n        }\n      }\n\n      .map-selector-section .component-map-selector .form-control{\n        width: 100%;\n      }\n\n      .data-selector-section, .map-selector-section{\n        padding-top: 10px;\n      }\n\n    }\n  "],["\n    .widget-setting-layerlist{\n      font-weight: lighter;\n      font-size: 13px;\n\n      .source-descript {\n        color: ",";\t\n      }\n\n      .webmap-thumbnail{\n        cursor: auto;\n        width: 100%;\n        height: 120px;\n        overflow: hidden;\n        padding: 1px;\n        border: "," solid initial;\n        img, div{\n          width: 100%;\n          height: 100%;\n        }\n      }\n\n      .layerlist-tools{\n        .layerlist-tools-item{\n          display: flex;\n          /* justify-content: space-between; */\n          margin-bottom: 8px;\n        }\n      }\n\n      .map-selector-section .component-map-selector .form-control{\n        width: 100%;\n      }\n\n      .data-selector-section, .map-selector-section{\n        padding-top: 10px;\n      }\n\n    }\n  "])),t.colors.palette.dark[600],a.polished.rem(2))}},3:function(e,o){e.exports=t},4:function(t,o){t.exports=e},5:function(t,e){t.exports=o},6:function(t,e){t.exports=n},7:function(t,e){t.exports=s}})}));